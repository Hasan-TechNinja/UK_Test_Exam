<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload Questions CSV</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7f9;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        
        .upload-container {
            max-width: 1000px;
            margin: 20px auto;
            padding: 30px;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
        }

        .upload-header {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eaeaea;
        }

        .upload-header h1 {
            color: #2c3e50;
            font-weight: 700;
            margin: 0;
            font-size: 28px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .upload-header p {
            color: #7f8c8d;
            margin: 10px 0 0;
            font-size: 16px;
        }

        .upload-form {
            margin: 25px 0;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 16px;
        }

        .file-input-container {
            position: relative;
        }

        .file-input {
            width: 100%;
            padding: 14px;
            border: 2px dashed #4a90e2;
            border-radius: 6px;
            background: #fff;
            font-size: 15px;
            box-sizing: border-box;
            transition: all 0.3s;
        }

        .file-input:hover {
            border-color: #3a7bc8;
            background: #f0f7ff;
        }

        .file-input:focus {
            outline: none;
            border-color: #4a90e2;
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.2);
        }

        .btn {
            display: inline-block;
            padding: 12px 24px;
            background: #4a90e2;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }

        .btn-primary {
            background: #4a90e2;
        }

        .btn-primary:hover {
            background: #3a7bc8;
        }

        .btn-secondary {
            background: #95a5a6;
            color: white;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
        }

        .instructions {
            margin-top: 30px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 5px solid #4a90e2;
        }

        .instructions h3 {
            margin-top: 0;
            color: #2c3e50;
            font-size: 22px;
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .instructions ol {
            padding-left: 20px;
            color: #34495e;
            margin-bottom: 20px;
        }

        .instructions li {
            margin-bottom: 10px;
            font-size: 15px;
        }

        .alert {
            padding: 15px;
            margin: 20px 0;
            border-radius: 6px;
            font-size: 15px;
        }

        .alert-error {
            background: #ffebee;
            color: #c62828;
            border-left: 5px solid #c62828;
        }

        .alert-success {
            background: #e8f5e9;
            color: #2e7d32;
            border-left: 5px solid #2e7d32;
        }

        .file-requirements {
            margin-top: 8px;
            font-size: 14px;
            color: #7f8c8d;
        }

        .back-link {
            margin-top: 25px;
            padding-top: 15px;
            border-top: 1px solid #eaeaea;
            text-align: center;
        }

        .template-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 14px;
            box-shadow: 0 1px 5px rgba(0,0,0,0.1);
        }

        .template-table th, .template-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }

        .template-table th {
            background-color: #4a90e2;
            color: white;
            font-weight: 600;
        }

        .template-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }

        .template-table tr:hover {
            background-color: #eef5ff;
        }

        .required {
            color: #c62828;
            font-weight: 600;
        }

        .optional {
            color: #2e7d32;
            font-weight: 600;
        }

        .note {
            background: #fff8e1;
            padding: 15px;
            border-radius: 6px;
            border-left: 5px solid #ffc107;
            margin: 20px 0;
            font-size: 15px;
        }

        .example-csv {
            margin-top: 25px;
        }

        .example-csv h4 {
            color: #2c3e50;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .example-csv pre {
            background: #2b2b2b;
            color: #f8f8f2;
            padding: 18px;
            border-radius: 6px;
            overflow-x: auto;
            font-size: 13px;
            line-height: 1.5;
            margin-top: 10px;
        }

        .section-title {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #2c3e50;
            margin: 30px 0 15px;
            font-size: 20px;
        }

        .csv-preview {
            overflow-x: auto;
            margin: 20px 0;
        }

        .csv-preview table {
            min-width: 100%;
            border-collapse: collapse;
        }

        .csv-preview th, .csv-preview td {
            padding: 10px 12px;
            border: 1px solid #ddd;
            font-size: 13px;
        }

        .csv-preview th {
            background-color: #4a90e2;
            color: white;
        }

        .csv-preview tr:nth-child(even) {
            background-color: #f8f9fa;
        }

        @media (max-width: 768px) {
            .upload-container {
                padding: 20px;
            }
            
            .instructions, .upload-form {
                padding: 15px;
            }
            
            .template-table {
                font-size: 13px;
            }
            
            .template-table th, .template-table td {
                padding: 8px;
            }
        }
    </style>
</head>
<body>
    <div class="upload-container">
        <div class="upload-header">
            <h1><i class="fas fa-file-csv"></i> Upload Questions CSV</h1>
            <p>Import multiple questions quickly using a CSV file with the correct format</p>
        </div>

        <div class="upload-form">
            <form method="post" enctype="multipart/form-data" class="form-horizontal">
    {% csrf_token %}
    <div class="form-group">
        <label for="id_csv_file">Select CSV File</label>
        <div class="file-input-container">
            <input type="file" name="csv_file" id="id_csv_file" accept=".csv" required class="file-input">
        </div>
        <div class="file-requirements">
            <p><i class="fas fa-info-circle"></i> Maximum file size: 5MB | Supported format: CSV</p>
        </div>
    </div>
    
    <div class="form-group">
        <button type="submit" class="btn btn-primary">
            <i class="fas fa-upload"></i> Upload CSV
        </button>
    </div>
</form>

        </div>

        <div class="instructions">
            <h3><i class="fas fa-list-alt"></i> CSV Format Requirements</h3>
            <p>Your CSV file must follow this exact format with these columns:</p>
            
            <table class="template-table">
                <thead>
                    <tr>
                        <th>Column Name</th>
                        <th>Required</th>
                        <th>Description</th>
                        <th>Example</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>chapter_id</td>
                        <td class="required">Required</td>
                        <td>ID of the chapter this question belongs to</td>
                        <td>2</td>
                    </tr>
                    <tr>
                        <td>type</td>
                        <td class="required">Required</td>
                        <td>Type of question (e.g., practice, exam, quiz)</td>
                        <td>practice / freeMockTest / mockTest</td>
                    </tr>
                    <tr>
                        <td>question_text</td>
                        <td class="required">Required</td>
                        <td>The actual question text</td>
                        <td>What is the value of 7 × 8?</td>
                    </tr>
                    <tr>
                        <td>explanation</td>
                        <td class="required">Required</td>
                        <td>Explanation of the answer</td>
                        <td>7×8 equals 56.</td>
                    </tr>
                    <tr>
                        <td>multiple_answers</td>
                        <td class="required">Required</td>
                        <td>Whether multiple answers are correct (True/False)</td>
                        <td>False</td>
                    </tr>
                    <tr>
                        <td>option_1_text to option_9_text</td>
                        <td class="optional">Conditional</td>
                        <td>Text for each answer option (include as many as needed)</td>
                        <td>56</td>
                    </tr>
                    <tr>
                        <td>option_1_correct to option_9_correct</td>
                        <td class="optional">Conditional</td>
                        <td>Whether the option is correct (True/False)</td>
                        <td>True</td>
                    </tr>
                </tbody>
            </table>
            
            <div class="note">
                <p><strong>Note:</strong> For each option text column (option_1_text, option_2_text, etc.), you must include a corresponding correct column (option_1_correct, option_2_correct, etc.) with a boolean value (True/False).</p>
            </div>
            
            <h3 class="section-title"><i class="fas fa-table"></i> Example CSV Format</h3>
            <p>Your CSV should look like this (first few rows):</p>
            
            <div class="csv-preview">
                <table>
                    <tr>
                        <th>chapter_id</th>
                        <th>type</th>
                        <th>question_text</th>
                        <th>explanation</th>
                        <th>multiple_answers</th>
                        <th>option_1_text</th>
                        <th>option_1_correct</th>
                        <th>option_2_text</th>
                        <th>option_2_correct</th>
                        <th>option_3_text</th>
                        <th>option_3_correct</th>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>practice / mockTest / freeMockTest</td>
                        <td>What is the value of 7 × 8?</td>
                        <td>7×8 equals 56.</td>
                        <td>False</td>
                        <td>72</td>
                        <td>False</td>
                        <td>56</td>
                        <td>True</td>
                        <td>64</td>
                        <td>False</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>practice</td>
                        <td>Solve for x: 3x + 12 = 27</td>
                        <td>Subtract 12 (15) then divide by 3 → 5.</td>
                        <td>False</td>
                        <td>x = 5</td>
                        <td>True</td>
                        <td>x = 9</td>
                        <td>False</td>
                        <td>x = 3</td>
                        <td>False</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>practice</td>
                        <td>Which is a prime number?</td>
                        <td>37 has no positive divisors other than 1 and itself.</td>
                        <td>False</td>
                        <td>37</td>
                        <td>True</td>
                        <td>21</td>
                        <td>False</td>
                        <td>33</td>
                        <td>False</td>
                    </tr>
                </table>
            </div>
            
            {% comment %} <div class="example-csv">
                <h4><i class="fas fa-code"></i> Raw CSV Example (First Row):</h4>
                <pre>chapter_id,type,question_text,explanation,multiple_answers,option_1_text,option_1_correct,option_2_text,option_2_correct,option_3_text,option_3_correct 2,practice,What is the value of 7 × 8?,7×8 equals 56.,False,72,False,56,True,64,False</pre>
            </div>
            
            <p style="margin-top: 20px;"><i class="fas fa-download"></i> Need a template? <a href="#" style="color: #4a90e2; font-weight: 600;">Download our CSV template</a></p> {% endcomment %}
        </div>

        <div class="back-link">
            <a href="{% url 'admin:main_question_changelist' %}" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i> Back to Questions List
            </a>
        </div>
    </div>

    <script>
        // Simple form validation
        document.querySelector('form').addEventListener('submit', function(e) {
            const fileInput = document.getElementById('id_csv_file');
            if (!fileInput.value) {
                e.preventDefault();
                alert('Please select a CSV file to upload.');
                fileInput.focus();
            }
        });
    </script>
</body>
</html>